<p-fieldset legend="Registro reporte diario trabajos en pozo">
  <p-fieldset legend="Datos del portafolio" [toggleable]="true">
    <div class="row mt-1">
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.numeroPortafolio}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.codigoPortafolio}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.fechaRegistro}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.fechaRegistro | date:'dd/MM/yyyy'}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.funcionario}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.funcionario.nombres}} {{portafolio.funcionario.apellidos}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-1">
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.pozo}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.pozo.pozNombre}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.trabajo}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.tipoTrabajo.tipoTrabajo}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4" *ngIf="portafolio.fechaTrabajoSinTorre">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.fechaTST}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.fechaTrabajoSinTorre | date:'dd/MM/yyyy'}}</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-1">
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.numeroTrabajo}}:</b></p>
          </div>
          <div class="col-md-8">
            <p>{{portafolio.numeroTrabajo}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.fechaInicio}}:</b></p>
          </div>
          <div class="col-md-8" *ngIf="!portafolio.fechaInicio">
            <p-calendar [style]="{ width: '100%' }" [minDate]="minDate" [maxDate]="maxDate"
              [inputStyle]="{ width: '100%' }" [(ngModel)]="fechaInicio"></p-calendar>
          </div>

          <div class="col-md-8" *ngIf="portafolio.fechaInicio">
            <p-calendar [style]="{ width: '100%' }" [minDate]="minDate" [maxDate]="maxDate"
              [inputStyle]="{ width: '100%' }" [(ngModel)]="fechaInicio" [disabled]="true"></p-calendar>
          </div>

        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col-md-4">
            <p><b>{{cs.fechaFin}}:</b></p>
          </div>
          <div class="col-md-8" *ngIf="!portafolio.fechaInicio">
            <p-calendar [style]="{ width: '100%' }" [minDate]="minDate" [maxDate]="maxDate"
              [inputStyle]="{ width: '100%' }" [(ngModel)]="fechaFin"></p-calendar>
          </div>
          <div class="col-md-8" *ngIf="portafolio.fechaInicio">
            <p-calendar [style]="{ width: '100%' }" [minDate]="minDate" [maxDate]="maxDate"
              [inputStyle]="{ width: '100%' }" [(ngModel)]="fechaFin" [disabled]="true"></p-calendar>
          </div>
        </div>
      </div>
    </div>
  </p-fieldset>
  <br>
  <p-fieldset legend="Acciones del portafolio" [toggleable]="true">


    <div class="row justify-content-center mt-1">
      <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-info btn-block" [disabled]="bIniciar"
          (click)="iniciarOperacionesRegistroDiario()">{{cs.iniciar}}</button>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-info btn-block" (click)="openModalRegistro(registroDiarioTemplate)"
          [disabled]="bRegistroDiario">{{cs.registroDiario}}</button>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-info btn-block"
          (click)="openModalSuspencion(registroDiarioTemplate)" [disabled]="bSuspecion">{{cs.suspencion}}</button>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-info btn-block" (click)="openModalReinicio(registroDiarioTemplate)"
          [disabled]="bReinicio">{{cs.reinicio}}</button>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-info btn-block" (click)="finalizarOperacionesRegistroDiario()"
          [disabled]="bFin">{{cs.terminar}}</button>
      </div>

    </div>
  </p-fieldset>
  <br>
  <p-fieldset legend="Registros del portafolio" [toggleable]="true">
    <div class="row">
      <div class="col-md-12">
        <table class="table table-bordered table-sm">
          <thead>
            <tr>
              <th>#</th>
              <th>{{cs.accion}}</th>
              <th>{{cs.fechaAccion}}</th>
              <th>{{cs.actividad}}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let reg of registroDiarioList| paginate: {id: 'foo', itemsPerPage: 10, currentPage: p }; let i=index;">
              <td>{{i+1}}</td>
              <td>{{reg.accion.accion}}</td>
              <td>{{reg.fechaAccion | date:'dd/MM/yyyy'}}</td>
              <td>{{reg.actividad}}</td>
            </tr>


          </tbody>
        </table>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 text-center">
        <pagination-controls id="foo" (pageChange)="p = $event" previousLabel="Anterior" nextLabel="Siguiente"
          responsive="true">
          ></pagination-controls>
      </div>
    </div>

  </p-fieldset>
</p-fieldset>


<ng-template #customLoadingTemplate> </ng-template>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate">
</ngx-loading>



<ng-template #registroDiarioTemplate>
  <div class="container mt-3 mb-3">
    <div class="row">
      <div class="col-md-12 text-center">
        <h4>{{cs.registroDiario}}</h4>
        <hr>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <h6 style="color: red" [hidden]="!errorCrear">Completa todos los campos de este formulario</h6>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4"><label>{{cs.accion}}:</label>
      </div>
      <div class="col-md-8">
        <input [value]="registroDiario.accion.accion" pInputText disabled />
      </div>
    </div>

    <div class="row">
      <div class="col-md-4"><label>{{cs.fechaAccion}}:</label>
      </div>
      <div class="col-md-8">
        <p-calendar [style]="{ width: '100%' }" [minDate]="minDateTrabajo" [maxDate]="maxDate"
          [inputStyle]="{ width: '100%' }" [(ngModel)]="registroDiario.fechaAccion"></p-calendar>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4"><label>{{cs.actividad}}:</label>
      </div>
      <div class="col-md-8">
        <div class="form-group">
          <textarea class="form-control" rows="4" [(ngModel)]="registroDiario.actividad"></textarea>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6" *ngIf="registroDiario.accion == aRegistroTrabajo">
        <button type="button" class="btn btn-sm btn-block btn-success" (click)="guardarRegistroDiario()">
          Registrar trabajo
        </button>
      </div>

      <div class="col-md-6" *ngIf="registroDiario.accion == aSuspencion">
        <button type="button" class="btn btn-sm btn-block btn-success" (click)="guardarSuspencion()">
          Suspender trabajo
        </button>
      </div>

      <div class="col-md-6" *ngIf="registroDiario.accion == aReinicio">
        <button type="button" class="btn btn-sm btn-block btn-success" (click)="guardarSuspencion()">
          Reiniciar trabajo
        </button>
      </div>

      <div class="col-md-6">
        <button type="button" class="btn btn-sm btn-block btn-danger " (click)="closeModalRegistro()">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</ng-template>