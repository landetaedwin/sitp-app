<p-fieldset legend="Mantenimiento catálogo categoría">
  <div class="row justify-content-end">
    <div class="col-md-2 text-right">
      <button type="button" class="btn btn-sm btn-success" (click)="getCategoriaList()">
        <i class="fa fa-refresh" aria-hidden="true"></i>
      </button>
    </div>
    <div class="col-md-2">
      <button type="button" class="btn btn-sm btn-primary btn-block" (click)="openNewModal(new)">Nuevo</button>
    </div>

  </div>
</p-fieldset>
<br>

<p-fieldset legend="Categoria" [toggleable]="true">
  <div class="row">
    <div class="col-md-12">
      <table class="table table-hover table-sm">
        <thead>
          <tr>
            <th>Código</th>
            <th>Categoria</th>
            <th>Tipo Trabajo</th>
            <th>Accion</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let c of categoriaList1| paginate: { id: 'paginator1',itemsPerPage: page_size2, currentPage: page_number2 , totalItems: total}; let i=index;">
            <td>{{c.codigoCategoria}}</td>
            <td>{{c.categoria}}</td>
            <td>{{c.tipoTrabajo.tipoTrabajo}}</td>            
            <td *ngIf="c.codigoCategoria != null">
              <span class="badge badge-primary" (click)="openEditModal(edit, c)">Editar</span>
              <span class="badge badge-danger" (click)="anular(c)">Anular</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 text-center">
      <pagination-controls id="paginator1" (pageChange)="page_number2 = $event" previousLabel="Anterior"
        nextLabel="Siguiente" responsive="true">
        ></pagination-controls>
    </div>
  </div>
</p-fieldset>


<ng-template #customLoadingTemplate> </ng-template>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate">
</ngx-loading>

<!--Para crear un nuevo-->
<ng-template #new>
  <div class="container mb-3 mt-3">
    <p-fieldset legend="Categoria">
      <div class="row">
        
        <div class="col-md-12">
          <div class="row">
            <div class="col-md-4"><label for="funcionario"><b>Categoria:* </b></label></div>
            <div class="col-md-8">
              <input type="text" [(ngModel)]="categoria.categoria" pInputText>
            </div>
          </div>
        </div>
        
        <div class="col-md-12">
          <div class="row">
            <div class="col-md-4"><label>Trabajo: *</label></div>
            <div class="col-md-8">
              <p-dropdown [options]="tipoTrabajoList" [(ngModel)]="tipoTrabajo"></p-dropdown>
            </div>
          </div>
        </div>

      </div>

      <div class="row justify-content-end mt-3">
        <div class="col-md-4">
          <button type="button" class="btn btn-sm btn-block btn-success" (click)="save()">
            Guardar
          </button>
        </div>
        <div class="col-md-4">
          <button type="button" class="btn btn-sm btn-block btn-danger " (click)="closeNewModal()">
            Cancelar
          </button>
        </div>
      </div>
    </p-fieldset>
  </div>
</ng-template>

<!--Pantalla de editar-->
<ng-template #edit>
  <div class="container mb-3 mt-3">
    <p-fieldset legend="Categoria">
      <div class="row">

        <div class="col-md-12">
          <div class="row">
            <div class="col-md-4"><label for="funcionario"><b>Categoria:* </b></label></div>
            <div class="col-md-8">
              <input type="text" [(ngModel)]="categoriaEdit.categoria" pInputText>
            </div>
          </div>
        </div>

        <div class="col-md-12">
          <div class="row">
            <div class="col-md-4"><label>Trabajo: *</label></div>
            <div class="col-md-8">
              <p-dropdown [options]="tipoTrabajoList" [(ngModel)]="tipoTrabajo"></p-dropdown>
            </div>
          </div>
        </div>

      </div>

      <div class="row justify-content-end mt-3">
        <div class="col-md-4">
          <button type="button" class="btn btn-sm btn-block btn-success" (click)="update()">
            Guardar
          </button>
        </div>
        <div class="col-md-4">
          <button type="button" class="btn btn-sm btn-block btn-danger " (click)="closeEditModal()">
            Cancelar
          </button>
        </div>
      </div>
    </p-fieldset>
  </div>
</ng-template>
